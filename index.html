<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda Kegiatan Kantor DTGD</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="g_id_onload"
         data-client_id="990268732296-hb74j4mvnq6k2r80kja2amgm4njlgu9n.apps.googleusercontent.com"
         data-callback="handleCredentialResponse"
         data-auto_prompt="false">
    </div>

    <div class="booking-container">
        <header class="booking-header">
            <div class="header-left">
                <h1>AGENDA KEGIATAN KANTOR DTGD</h1>
            </div>
            <div class="header-right">
                <a href="https://ugm.id/mydtgd" target="_blank" class="btn-link">ke MyDTGD</a>
                <button id="authBtn" class="btn-login">Login</button>
            </div>
        </header>

        <div class="dashboard-row">
            <div class="card-dashboard">
                <div class="calendar-header">
                    <button id="prevMonth" class="btn-nav-cal"> < </button>
                    <h3 id="currentMonthLabel" style="margin:0">Januari 2026</h3>
                    <button id="nextMonth" class="btn-nav-cal"> > </button>
                </div>
                <div id="calendar-ui" class="calendar-container"></div>
            </div>

            <div class="card-dashboard">
                <div class="guide-container">
                    <h3>Panduan Pemesanan Ruang DTGD:</h3>
                    <ol class="guide-list">
                        <li>Lakukan <strong>Login</strong> untuk memesan ruang. Anda tidak bisa melakukan pemesanan jika belum login. Gunakan email SSO UGM.</li>
                        <li>Pilih <strong>tanggal di kalender</strong> untuk melihat ketersediaan ruang pada hari tersebut.</li>
                        <li>Tabel di bawah akan menunjukkan ketersediaan ruang secara real-time.</li>
                        <li>Klik tombol <strong>+ Pesan Ruang</strong>, isi detail acara lengkap, lalu klik Tambah Agenda.</li>
                        <li>Gunakan tombol <strong>"Pesanan Saya"</strong> untuk menyorot agenda yang Anda buat sendiri.</li>
                        <li>Tombol <strong>"Sinkron Data"</strong> digunakan untuk menarik data terbaru dari server.</li>
                        <li>Tombol <strong>"Filter Ruang"</strong> untuk menyederhanakan tampilan kolom ruangan di tabel.</li>
                    </ol>
                </div>
                <div class="control-panel">
                    <button id="openModal" class="btn-ctrl btn-add-new disabled">
                        <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 4v16m8-8H4"></path></svg>
                        Pesan Ruang
                    </button>
                    <button class="btn-ctrl" id="btnSync">
                        <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg>
                        Sinkron Data
                    </button>
                    <button class="btn-ctrl" id="btnMyBooking">
                        <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                        Pesanan Saya
                    </button>
                    <button class="btn-ctrl" id="btnFilterRuang">
                        <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path></svg>
                        Filter Ruang
                    </button>
                </div>
            </div>
        </div>

        <div class="table-header-flex">
            <h2 class="table-title" id="tableTitleDynamic">Jadwal Penggunaan Ruang DTGD - Sabtu, 31 Januari 2026</h2>
            <button id="btnToggleView" class="btn-ctrl btn-view-toggle">
                <svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                <span id="textToggleView">View per Minggu</span>
            </button>
        </div>
        <div class="table-wrapper">
            <div id="tableLoading" class="table-loading hidden">
                <div class="loader"></div>
                <span>Memuat agenda...</span>
            </div>
            <table id="agendaTable">
                <thead>
                    <tr>
                        <th>Jam</th>
                        <th>RS.1</th><th>RS.2</th><th>RS.3</th><th>Lab. Hidro</th><th>Lab GGGF</th><th>Lab GIIG</th><th>Lab Foto</th><th>Lab Geokom</th><th>III.6</th><th>III.5</th><th>III.4</th><th>III.3</th><th>III.2</th><th>III.1</th><th>1.1</th><th>R. Pengurus</th><th>R. Sidang SURTA</th><th>R. Bersama</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    </tbody>
            </table>
        </div>

        <footer class="watermark">
            Departemen Teknik Geodesi FT UGM @2025
        </footer>
    </div>

    <div id="bookingModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Formulir Pesan Ruang</h2>
            <form id="bookingForm">
                <div class="form-group">
                    <label>Tanggal</label>
                    <input type="date" id="tglKegiatan" required>
                </div>
                <div class="form-group">
                    <label>Ruangan</label>
                    <select id="pilihRuang" required>
                        </select>
                </div>
                <div class="form-group">
                    <label>Acara</label>
                    <textarea id="namaAcara" rows="3" placeholder="Nama kegiatan..." required></textarea>
                </div>
                <div class="form-group">
                    <label>Waktu Kegiatan</label>
                    <div style="display: flex; gap: 10px;">
                        <select id="jamMulai" required></select>
                        <span style="align-self: center;">s/d</span>
                        <select id="jamSelesai" required></select>
                    </div>
                </div>
                <div class="form-group">
                    <label>PIC Kegiatan</label>
                    <input type="text" id="picKegiatan" placeholder="Nama penanggung jawab" required>
                </div>
                <button type="submit" class="btn-submit">Tambah Agenda</button>
            </form>
        </div>
    </div>

    <script src="js/script.js"></script>
</body>
</html>